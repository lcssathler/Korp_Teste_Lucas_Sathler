<div class="invoice-form-container">
  <h2>Nova Nota Fiscal</h2>

  <form [formGroup]="invoiceForm" (ngSubmit)="onSubmit()" class="invoice-form">
    <div formArrayName="items" class="invoice-items">
      <div *ngFor="let item of items.controls; let i = index" [formGroupName]="i" class="invoice-item">
        <div class="form-field">
          <mat-form-field>
            <mat-label>Product</mat-label>
            <mat-select formControlName="productId">
              <mat-option *ngFor="let product of products" [value]="product.id">
                {{ product.code }} - {{ product.description }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field>
            <mat-label>Quantity</mat-label>
            <input matInput type="number" formControlName="quantity">
          </mat-form-field>
        </div>

        <div class="form-actions-inline">
          <button mat-stroked-button color="warn" type="button" class="remove-button" (click)="removeItem(i)">Remove</button>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button mat-stroked-button type="button" (click)="addItem()">Add Item</button>
      <button mat-raised-button color="primary" type="submit">Save</button>
    </div>
  </form>
</div>
